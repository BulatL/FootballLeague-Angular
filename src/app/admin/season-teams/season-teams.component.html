<div class="season-teams-container">
  <div class="header">
    <h2>Upravljanje timovima - {{ season?.name }}</h2>
    <div class="header-info">
      <span class="league-badge">{{ season?.leagueName }}</span>
      <span class="team-count">{{ selectedTeams.length }} timova</span>
    </div>
  </div>

  <div *ngIf="loading" class="status-message">Učitavanje...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <button class="btn btn-success" (click)="selectAllTeams()" [disabled]="loading">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9,11 12,14 22,4"></polyline>
        <path d="M21,12v7a2,2 0 0,1 -2,2H5a2,2 0 0,1 -2,-2V5a2,2 0 0,1 2,-2h11"></path>
      </svg>
      Izaberi sve
    </button>
    
    <button class="btn btn-warning" (click)="deselectAllTeams()" [disabled]="loading">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="9" y1="9" x2="15" y2="15"></line>
        <line x1="15" y1="9" x2="9" y2="15"></line>
      </svg>
      Poništi sve
    </button>

    <button class="btn btn-primary" (click)="saveChanges()" [disabled]="loading || !hasChanges()">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19,21H5a2,2 0 0,1 -2,-2V5a2,2 0 0,1 2,-2H14l5,5v11A2,2 0 0,1 19,21z"></path>
        <polyline points="17,21 17,13 7,13 7,21"></polyline>
        <polyline points="7,3 7,8 15,8"></polyline>
      </svg>
      Sačuvaj promene
    </button>
  </div>

  <!-- Search and Filter -->
  <div class="search-section">
    <div class="search-group">
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        (input)="filterTeams()"
        placeholder="Pretraži timove..." 
        class="search-input"
      />
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.35-4.35"></path>
      </svg>
    </div>
    
    <div class="filter-group">
      <label>
        <input type="checkbox" [(ngModel)]="showOnlySelected" (change)="filterTeams()">
        Prikaži samo izabrane
      </label>
    </div>
  </div>

  <!-- Teams Grid -->
  <div *ngIf="!loading" class="teams-grid">
    <div 
      *ngFor="let team of filteredTeams; trackBy: trackByTeamId" 
      class="team-card"
      [class.selected]="isTeamSelected(team.id)"
      [class.in-season]="isTeamInSeason(team.id)"
    >
      <div class="team-checkbox">
        <input 
          type="checkbox" 
          [checked]="isTeamSelected(team.id)"
          (change)="toggleTeam(team.id, $event)"
          [disabled]="loading"
        />
      </div>
      
      <div class="team-info">
        <img [src]="getTeamLogo(team.logo)" width="40" height="40" class="team-logo" />
        <div class="team-details">
          <h4>{{ team.fullName }}</h4>
          <span class="team-short-name">{{ team.shortName }}</span>
          
          <div class="team-meta">
            <span class="join-date">Član od: {{ formatDate(team.joinedDate) }}</span>
            <span class="status-badge" [class]="getTeamStatusClass(team.id)">
              {{ getTeamStatusText(team.id) }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty States -->
  <div *ngIf="!loading && filteredTeams.length === 0 && searchTerm" class="empty-state">
    <p>Nema timova koji odgovaraju pretrazi "{{ searchTerm }}"</p>
    <button class="btn btn-secondary" (click)="clearSearch()">Obriši pretragu</button>
  </div>

  <div *ngIf="!loading && availableTeams.length === 0" class="empty-state">
    <div class="empty-icon">⚽</div>
    <h3>Nema dostupnih timova</h3>
    <p>Svi timovi iz ove lige su već dodati u sezonu ili nema timova u ligi.</p>
  </div>

  <!-- Summary -->
  <div *ngIf="!loading && filteredTeams.length > 0" class="summary-section">
    <div class="summary-stats">
      <div class="stat">
        <span class="stat-number">{{ selectedTeams.length }}</span>
        <span class="stat-label">Izabrano timova</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ availableTeams.length }}</span>
        <span class="stat-label">Ukupno dostupno</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ getCurrentlyInSeason() }}</span>
        <span class="stat-label">Trenutno u sezoni</span>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <div class="navigation-actions">
    <a [routerLink]="['/admin/seasons', seasonId]" class="btn btn-secondary">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H6m6-7-7 7 7 7"></path>
      </svg>
      Nazad na sezonu
    </a>
  </div>
</div>