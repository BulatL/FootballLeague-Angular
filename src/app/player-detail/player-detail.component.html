<div class="not-found" *ngIf="!loading && player == null">
    <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
    </div>
    <h2>Igraƒç nije pronaƒëen</h2>
    <p>Izvinjavamo se, ali igraƒç kojeg tra≈æite trenutno nije dostupan u na≈°oj bazi podataka.</p>
    <!-- <a href="/players" class="btn">Vrati se na listu igraƒça</a> -->
</div>

<div class="player-info-container" *ngIf="!loading && player != null">
    <!-- Player Header Section -->
  <div class="player-header">
      <div class="player-image-container">
          <img [src]="getPlayerImage(player.image)" [alt]="player.firstName + ' ' + player.lastName" class="player-image">
          <div class="dream-points-badge">
              <span class="dream-points-label">Dream Points</span>
              <span class="dream-points-value">{{player.currentSeasonStats.dreamTeamPoint}}</span>
          </div>
      </div>
      
      <div class="player-info">
          <h1 class="player-name">{{ player.firstName + ' ' + player.lastName}}</h1>
          <div class="stats-grid">
              <div class="stat-item">
                  <span class="stat-value">{{ player.totalGames }}</span>
                  <span class="stat-label">Utakmice</span>
              </div>
              <div class="stat-item">
                  <span class="stat-value">{{ player.totalWins }}</span>
                  <span class="stat-label">Pobede</span>
              </div>
              <div class="stat-item">
                  <span class="stat-value">{{ player.totalGoals }}</span>
                  <span class="stat-label">Golovi</span>
              </div>
              <div class="stat-item">
                  <span class="stat-value">{{ player.totalAssists }}</span>
                  <span class="stat-label">Asistencije</span>
              </div>
              <div class="stat-item" *ngIf="player.position == 'Goalkeeper'">
                  <span class="stat-value">{{ player.totalSaves }}</span>
                  <span class="stat-label">Odbrane</span>
              </div>
              <div class="stat-item">
                  <span class="stat-value">{{ player.totalThropies }}</span>
                  <span class="stat-label">Trofeji</span>
              </div>
          </div>
      </div>
  </div>
    
    <!-- Current Season Statistics Section -->
  <div class="section">
      <h2 class="section-title">
          <span class="title-icon">üìä</span>
          Statistika trenutne sezone
      </h2>
      
      <div class="current-stats-container">
          <!-- General Stats -->
          <div class="stats-category">
              <h3 class="category-title">
                  <span class="category-icon">‚öΩ</span>
                  Generalno
              </h3>
              <div class="stats-list">
                  <div class="stat-row">
                      <span class="stat-name">Odigrane Utakmice</span>
                      <span class="stat-value">{{ player.currentSeasonStats.games }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Pobede</span>
                      <span class="stat-value">{{ player.currentSeasonStats.wins }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Izgubljeno</span>
                      <span class="stat-value">{{ player.currentSeasonStats.losses }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Nere≈°eno</span>
                      <span class="stat-value">{{ player.currentSeasonStats.draws }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Dream Team pts</span>
                      <span class="stat-value highlighted">{{ player.currentSeasonStats.dreamTeamPoint }} <small>pts</small></span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Dream Team / Utakmice</span>
                      <span class="stat-value highlighted">{{ (player.currentSeasonStats.dreamTeamPoint / player.currentSeasonStats.games).toFixed(2) }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Trofeji</span>
                      <span class="stat-value trophy-count">{{ player.currentSeasonStats.thropies }}</span>
                  </div>
              </div>
          </div>

          <!-- Performance Stats -->
          <div class="stats-category">
              <h3 class="category-title">
                  <span class="category-icon">ü•Ö</span>
                  Igra
              </h3>
              <div class="stats-list">
                  <div class="stat-row">
                      <span class="stat-name">Postignuti Golovi</span>
                      <span class="stat-value">{{ player.currentSeasonStats.goalsScored }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Asistencije</span>
                      <span class="stat-value">{{ player.currentSeasonStats.assists }}</span>
                  </div>
                  <div class="stat-row" *ngIf="player.position == 'Goalkeeper'">
                      <span class="stat-name">Odbrane</span>
                      <span class="stat-value">{{ player.currentSeasonStats.saves }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Pogoƒëeni Penali</span>
                      <span class="stat-value">{{ player.currentSeasonStats.penalties }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Proma≈°eni Penali</span>
                      <span class="stat-value">{{ player.currentSeasonStats.penaltiesMissed }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Gol po utakmici</span>
                      <span class="stat-value performance-stat">{{ (player.currentSeasonStats.goalsScored / player.currentSeasonStats.games).toFixed(2) }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">% Pobeda</span>
                      <span class="stat-value percentage">{{ (player.currentSeasonStats.wins / player.currentSeasonStats.games * 100).toFixed(1) }}%</span>
                  </div>
              </div>
          </div>

          <!-- Discipline Stats -->
          <div class="stats-category">
              <h3 class="category-title">
                  <span class="category-icon">üü®</span>
                  Fer Plej
              </h3>
              <div class="stats-list">
                  <div class="stat-row">
                      <span class="stat-name">≈Ωuti Karton</span>
                      <span class="stat-value yellow-card">{{ player.currentSeasonStats.yellowCards }}</span>
                  </div>
                  <div class="stat-row">
                      <span class="stat-name">Crveni Karton</span>
                      <span class="stat-value red-card">{{ player.currentSeasonStats.redCards }}</span>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <!-- Recent Fixtures Section -->      
  <div class="section" *ngIf="!loadingFixtures && player.fixtures && player.fixtures.length > 0">
      <h2 class="section-title">üìÖ Utakmice</h2>
      
      <div class="fixtures-carousel-container">
          <!-- Navigation Buttons -->
          <button 
              *ngIf="showNavigation"
              class="carousel-nav prev" 
              [disabled]="!canGoPrevious"
              (click)="moveCarousel(-1)">
              ‚Äπ
          </button>
          
          <button 
              *ngIf="showNavigation"
              class="carousel-nav next" 
              [disabled]="!canGoNext"
              (click)="moveCarousel(1)">
              ‚Ä∫
          </button>
          
          <div class="fixtures-carousel">
              <div 
                  class="fixtures-track" 
                  [class.single-card]="!showNavigation"
                  [style.transform]="trackTransform">
                  
                  <!-- Fixture Cards -->
                  <div 
                      *ngFor="let fixture of player.fixtures" 
                      class="fixture-card" 
                      (click)="onFixtureClick(fixture.fixtureId)">
                      
                      <div class="round">
                          <img src="soccer-ball-16.png" alt="Round" />
                          <span class="margin-left-5">Kolo: {{ fixture.roundNumber }}</span>
                      </div>
                      
                      <div class="teams-container">
                          <div class="team">
                              <img 
                                  class="fixture-card-team-logo" 
                                  [src]="getTeamLogo(fixture.homeTeamLogo)" 
                                  [alt]="fixture.homeTeamShortName" />
                              <div class="team-name margin-left-5">{{ fixture.homeTeamShortName }}</div>
                          </div>

                          <div class="score">
                              <span 
                                  [class.winning-score]="isWinningTeam(fixture.homeTeamScore, fixture.awayTeamScore, true)"
                                  [class.losing-score]="isLosingTeam(fixture.homeTeamScore, fixture.awayTeamScore, true)">
                                  {{ fixture.homeTeamScore }}
                              </span> 
                              - 
                              <span 
                                  [class.winning-score]="isWinningTeam(fixture.homeTeamScore, fixture.awayTeamScore, false)"
                                  [class.losing-score]="isLosingTeam(fixture.homeTeamScore, fixture.awayTeamScore, false)">
                                  {{ fixture.awayTeamScore }}
                              </span>
                          </div>

                          <div class="team">
                              <img 
                                  class="fixture-card-team-logo" 
                                  [src]="getTeamLogo(fixture.awayTeamLogo)" 
                                  [alt]="fixture.awayTeamShortName" />
                              <div class="team-name margin-left-5">{{ fixture.awayTeamShortName }}</div>
                          </div>
                      </div>
                      
                      <!-- Optional: Add fixture date if needed -->
                      <div class="fixture-date" *ngIf="fixture.fixtureDate">
                          <span>{{ fixture.fixtureDate | date:'EEE, MMM d ‚Ä¢ HH:mm' }}</span>
                      </div>
                  </div>
              </div>
          </div>

          <!-- Dots Indicator -->
          <div *ngIf="showNavigation" class="carousel-dots">
              <div 
                  *ngFor="let dot of dotsArray; let i = index"
                  class="dot"
                  [class.active]="i === currentIndex"
                  (click)="goToSlide(i)">
              </div>
          </div>
      </div>
  </div>

  <!-- Loading state for fixtures -->
  <div class="section" *ngIf="loadingFixtures">
      <h2 class="section-title">üìÖ Utakmice</h2>
      <p>Uƒçitavanje utakmica...</p>
  </div>

  <!-- No fixtures message -->
  <div class="section" *ngIf="!loadingFixtures && (!player.fixtures || player.fixtures.length === 0)">
      <h2 class="section-title">üìÖ Utakmice</h2>
      <p>Igrac nije odigrao ni jednu utakmicu.</p>
  </div>

  <!-- Trophies Section -->
  <div class="section" *ngIf="!loading && player.playerAwards != null && player.playerAwards.$values.length > 0">
      <h2 class="section-title">
          <span class="title-icon">üèÜ</span>
          Trofeji
      </h2>
      
      <div class="trophies-grid">
          <div class="trophy-card" 
              *ngFor="let trophy of player.playerAwards.$values"
              [class.clickable]="trophy.fixtureId !== null"
              (click)="onTrophyClick(trophy)">
              <div class="trophy-image-container">
                  <img src="trophy.jpeg" [alt]="trophy.awardName" class="trophy-image">
              </div>
              <div class="trophy-info">          
                  <h3 class="trophy-name">
                      {{ trophy.awardName }}{{ trophy.fixtureId !== null ? ' utakmice' : '' }}
                  </h3>
                  <span class="trophy-season">{{ trophy.seasonName }}</span>
                  <p class="trophy-description" *ngIf="trophy.awardName">{{ trophy.awardName }}</p>
              </div>
          </div>
      </div>
  </div>
  <!-- Season Statistics Table -->
  <!-- <div class="section">
    <h2 class="section-title">
      <span class="title-icon">üìä</span>
      Statistike po Sezonama
    </h2>
    
    <div class="table-container">
      <table class="season-stats-table">
        <thead>
          <tr>
            <th>Sezona</th>
            <th>Tim</th>
            <th>Utakmice</th>
            <th>Pobede</th>
            <th>Golovi</th>
            <th>Asistencije</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let season of player.seasonStats">
            <td class="season-cell">{{ season.season }}</td>
            <td class="team-cell">
              <img [src]="season.teamLogo" [alt]="season.team" class="table-team-logo">
              {{ season.team }}
            </td>
            <td>{{ season.gamesPlayed }}</td>
            <td>{{ season.wins }}</td>
            <td>{{ season.goals }}</td>
            <td>{{ season.assists }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div> -->
</div>